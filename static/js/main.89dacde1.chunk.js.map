{"version":3,"sources":["components/UI/MyModal/MyModal.module.css","components/UI/button/MyButton.module.css","components/UI/input/MyInput.module.css","components/UI/Loader/Loader.module.css","components/UI/button/MyButton.jsx","context/index.js","components/UI/Navbar/Navbar.jsx","pages/About.jsx","API/PostService.js","hooks/usePosts.js","hooks/useFetching.js","utils/pages.js","components/UI/input/MyInput.jsx","components/PostForm.jsx","components/UI/MyModal/MyModal.jsx","components/UI/select/MySelect.jsx","components/PostFilter.jsx","components/PostItem.jsx","components/PostList.jsx","components/UI/Loader/Loader.jsx","components/UI/pagination/Pagination.jsx","pages/Posts.jsx","router/index.js","hooks/useObserver.js","pages/PostIdPage.jsx","pages/Login.jsx","components/AppRouter.jsx","App.js","index.js"],"names":["module","exports","MyButton","children","props","className","classes","myBtn","AuthContext","createContext","Navbar","useContext","setIsAuth","isAuth","onClick","localStorage","removeItem","to","About","PostService","limit","page","axios","get","params","_limit","_page","response","id","usePosts","posts","sort","query","sortedPosts","useMemo","a","b","localeCompare","useSortedPosts","filter","post","title","toLowerCase","includes","useFetching","callback","useState","isLoading","setIsLoading","error","setError","message","getPageCount","totalCount","Math","ceil","MyInput","React","forwardRef","ref","myInput","PostForm","create","body","setPost","value","onChange","e","target","type","placeholder","preventDefault","newPost","Date","now","MyModal","visible","setVisible","rootClasses","cl","myModal","push","active","join","myModalContent","stopPropagation","MySelect","options","defaultValue","event","disabled","map","option","name","PostFilter","setFilter","selectedSort","PostItem","router","useHistory","remove","PostList","length","style","textAlign","TransitionGroup","index","CSSTransition","timeout","classNames","number","Loader","loader","Pagination","totalPages","changePage","pagesArray","result","i","getPagesArray","p","Posts","privateRoutes","path","component","exact","setPosts","modal","setModal","setTotalPages","setLimit","setPage","sortedAndSearchedPosts","lastElement","useRef","getAll","data","headers","fetchPosts","isPostsLoading","postError","canLoad","observer","useEffect","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","useObserver","marginTop","margin","height","background","display","justifyContent","useParams","comments","setComments","getById","fetchPostById","getCommentsByPostId","fetchComments","isComLoading","comm","email","publicRoutes","onSubmit","setItem","AppRouter","console","log","route","App","setLoading","getItem","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.89dacde1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"myModal\":\"MyModal_myModal__2rq_z\",\"myModalContent\":\"MyModal_myModalContent__1t5rT\",\"active\":\"MyModal_active__1oky-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myBtn\":\"MyButton_myBtn__2eDHi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myInput\":\"MyInput_myInput__DrHLx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__3g5dK\",\"rotate\":\"Loader_rotate__lgTx9\"};","import React from 'react';\r\nimport classes from './MyButton.module.css';\r\n\r\nconst MyButton = ({children, ...props}) => {\r\n    return (\r\n        <button {...props} className={classes.myBtn}>\r\n            {children}\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default MyButton;\r\n","import {createContext} from 'react'\r\n\r\nexport const AuthContext = createContext(null);\r\n","import React, {useContext} from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport MyButton from \"../button/MyButton\";\r\nimport {AuthContext} from \"../../../context\";\r\n\r\nconst Navbar = () => {\r\n    const {isAuth, setIsAuth} = useContext(AuthContext);\r\n\r\n    const logout = () => {\r\n        setIsAuth(false);\r\n        localStorage.removeItem('auth')\r\n    }\r\n\r\n    return (\r\n        <div className=\"navbar\">\r\n            <MyButton onClick={logout}>\r\n                Выйти\r\n            </MyButton>\r\n            <div className=\"navbar__links\">\r\n                <Link to=\"/about\">О сайте</Link>\r\n                <Link to=\"/posts\">Посты</Link>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Navbar;\r\n","import React from 'react';\r\n\r\nconst About = () => {\r\n    return (\r\n        <h1>\r\n            Это приложение создано в качестве обуч. ролика на ULBI TV\r\n        </h1>\r\n    );\r\n};\r\n\r\nexport default About;\r\n","import axios from \"axios\";\r\n\r\nexport default class PostService {\r\n    static async getAll(limit = 10, page = 1) {\r\n        const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\r\n            params: {\r\n                _limit: limit,\r\n                _page: page\r\n            }\r\n        })\r\n        return response;\r\n    }\r\n\r\n    static async getById(id) {\r\n        const response = await axios.get('https://jsonplaceholder.typicode.com/posts/' + id)\r\n        return response;\r\n    }\r\n\r\n    static async getCommentsByPostId(id) {\r\n        const response = await axios.get(`https://jsonplaceholder.typicode.com/posts/${id}/comments`)\r\n        return response;\r\n    }\r\n}\r\n","import {useMemo} from \"react\";\r\n\r\nexport const useSortedPosts = (posts, sort) => {\r\n    const sortedPosts = useMemo(() => {\r\n        if(sort) {\r\n            return [...posts].sort((a, b) => a[sort].localeCompare(b[sort]))\r\n        }\r\n        return posts;\r\n    }, [sort, posts])\r\n\r\n    return sortedPosts;\r\n}\r\n\r\nexport const usePosts = (posts, sort, query) => {\r\n    const sortedPosts = useSortedPosts(posts, sort);\r\n\r\n    const sortedAndSearchedPosts = useMemo(() => {\r\n        return sortedPosts.filter(post => post.title.toLowerCase().includes(query.toLowerCase()))\r\n    }, [query, sortedPosts])\r\n\r\n    return sortedAndSearchedPosts;\r\n}\r\n","import {useState} from \"react\";\r\n\r\nexport const useFetching = (callback) => {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    const fetching = async (...args) => {\r\n        try {\r\n            setIsLoading(true)\r\n            await callback(...args)\r\n        } catch (e) {\r\n            setError(e.message);\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    return [fetching, isLoading, error]\r\n}\r\n","export const getPageCount = (totalCount, limit) => {\r\n    return Math.ceil(totalCount / limit)\r\n}\r\n\r\nexport const getPagesArray = (totalPages) => {\r\n    let result = [];\r\n    for (let i = 0; i < totalPages; i++) {\r\n        result.push(i + 1)\r\n    }\r\n    return result;\r\n}\r\n","import React from 'react';\r\nimport classes from './MyInput.module.css';\r\n\r\nconst MyInput = React.forwardRef((props, ref) => {\r\n    return (\r\n        <input ref={ref} className={classes.myInput} {...props}/>\r\n    );\r\n});\r\n\r\nexport default MyInput;\r\n","import React, {useState} from 'react';\r\nimport MyInput from \"./UI/input/MyInput\";\r\nimport MyButton from \"./UI/button/MyButton\";\r\n\r\nconst PostForm = ({create}) => {\r\n    const [post, setPost] = useState({title: '', body: ''})\r\n\r\n\r\n    const addNewPost = (e) => {\r\n        e.preventDefault()\r\n        const newPost = {\r\n            ...post, id: Date.now()\r\n        }\r\n        create(newPost)\r\n        setPost({title: '', body: ''})\r\n    }\r\n\r\n    return (\r\n        <form>\r\n            {/*Управляемый компонент*/}\r\n            <MyInput\r\n                value={post.title}\r\n                onChange={e => setPost({...post, title: e.target.value})}\r\n                type=\"text\"\r\n                placeholder=\"Название поста\"\r\n            />\r\n            {/*Неуправляемый\\Неконтролируемый компонент*/}\r\n            <MyInput\r\n                value={post.body}\r\n                onChange={e => setPost({...post, body: e.target.value})}\r\n                type=\"text\"\r\n                placeholder=\"Описание поста\"\r\n            />\r\n            <MyButton onClick={addNewPost}>Создать пост</MyButton>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default PostForm;\r\n","import React from 'react';\r\nimport cl from './MyModal.module.css';\r\n\r\nconst MyModal = ({children, visible, setVisible}) => {\r\n\r\n    const rootClasses = [cl.myModal]\r\n\r\n    if (visible) {\r\n        rootClasses.push(cl.active);\r\n    }\r\n\r\n    return (\r\n        <div className={rootClasses.join(' ')} onClick={() => setVisible(false)}>\r\n            <div className={cl.myModalContent} onClick={(e) => e.stopPropagation()}>\r\n                {children}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MyModal;\r\n","import React from 'react';\r\n\r\nconst MySelect = ({options, defaultValue, value, onChange}) => {\r\n    return (\r\n        <select\r\n            value={value}\r\n            onChange={event => onChange(event.target.value)}\r\n        >\r\n            <option disabled value=\"\">{defaultValue}</option>\r\n            {options.map(option =>\r\n                <option key={option.value} value={option.value}>\r\n                    {option.name}\r\n                </option>\r\n            )}\r\n        </select>\r\n    );\r\n};\r\n\r\nexport default MySelect;\r\n","import React from 'react';\r\nimport MyInput from \"./UI/input/MyInput\";\r\nimport MySelect from \"./UI/select/MySelect\";\r\n\r\nconst PostFilter = ({filter, setFilter}) => {\r\n    return (\r\n        <div>\r\n            <MyInput\r\n                value={filter.query}\r\n                onChange={e => setFilter({...filter, query: e.target.value})}\r\n                placeholder=\"Поиск...\"\r\n            />\r\n            <MySelect\r\n                value={filter.sort}\r\n                onChange={selectedSort => setFilter({...filter, sort: selectedSort})}\r\n                defaultValue=\"Сортировка\"\r\n                options={[\r\n                    {value: 'title', name: 'По названию'},\r\n                    {value: 'body', name: 'По описанию'},\r\n                ]}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PostFilter;\r\n","import React from 'react';\r\nimport MyButton from \"./UI/button/MyButton\";\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nconst PostItem = (props) => {\r\n    const router = useHistory()\r\n\r\n    return (\r\n        <div className=\"post\">\r\n            <div className=\"post__content\">\r\n                <strong>{props.post.id}. {props.post.title}</strong>\r\n                <div>\r\n                    {props.post.body}\r\n                </div>\r\n            </div>\r\n            <div className=\"post__btns\">\r\n                <MyButton onClick={() => router.push(`/posts/${props.post.id}`)}>\r\n                    Открыть\r\n                </MyButton>\r\n                <MyButton onClick={() => props.remove(props.post)}>\r\n                    Удалить\r\n                </MyButton>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PostItem;\r\n","import React from 'react';\r\nimport PostItem from \"./PostItem\";\r\nimport {TransitionGroup, CSSTransition} from \"react-transition-group\";\r\n\r\nconst PostList = ({posts, title, remove}) => {\r\n\r\n    if (!posts.length) {\r\n        return (\r\n            <h1 style={{textAlign: 'center'}}>\r\n                Посты не найдены!\r\n            </h1>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1 style={{textAlign: 'center'}}>\r\n                {title}\r\n            </h1>\r\n            <TransitionGroup>\r\n                {posts.map((post, index) =>\r\n                    <CSSTransition\r\n                        key={post.id}\r\n                        timeout={500}\r\n                        classNames=\"post\"\r\n                    >\r\n                        <PostItem remove={remove} number={index + 1} post={post} />\r\n                    </CSSTransition>\r\n                )}\r\n            </TransitionGroup>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PostList;\r\n","import React from 'react';\r\nimport cl from './Loader.module.css';\r\n\r\nconst Loader = () => {\r\n    return (\r\n        <div className={cl.loader}>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\nimport {getPagesArray} from \"../../../utils/pages\";\r\n\r\nconst Pagination = ({totalPages, page, changePage}) => {\r\n    let pagesArray = getPagesArray(totalPages);\r\n    return (\r\n        <div className=\"page__wrapper\">\r\n            {pagesArray.map(p =>\r\n                <span\r\n                    onClick={() => changePage(p)}\r\n                    key={p}\r\n                    className={page === p ? 'page page__current' : 'page'}\r\n                >\r\n                        {p}\r\n                    </span>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Pagination;\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport PostService from \"../API/PostService\";\r\nimport {usePosts} from \"../hooks/usePosts\";\r\nimport {useFetching} from \"../hooks/useFetching\";\r\nimport {getPageCount} from \"../utils/pages\";\r\nimport MyButton from \"../components/UI/button/MyButton\";\r\nimport PostForm from \"../components/PostForm\";\r\nimport MyModal from \"../components/UI/MyModal/MyModal\";\r\nimport PostFilter from \"../components/PostFilter\";\r\nimport PostList from \"../components/PostList\";\r\nimport Loader from \"../components/UI/Loader/Loader\";\r\nimport Pagination from \"../components/UI/pagination/Pagination\";\r\nimport {useObserver} from \"../hooks/useObserver\";\r\nimport MySelect from \"../components/UI/select/MySelect\";\r\n\r\n\r\nfunction Posts() {\r\n    const [posts, setPosts] = useState([])\r\n    const [filter, setFilter] = useState({sort: '', query: ''})\r\n    const [modal, setModal] = useState(false);\r\n    const [totalPages, setTotalPages] = useState(0);\r\n    const [limit, setLimit] = useState(10);\r\n    const [page, setPage] = useState(1);\r\n    const sortedAndSearchedPosts = usePosts(posts, filter.sort, filter.query);\r\n    const lastElement = useRef()\r\n\r\n    const [fetchPosts, isPostsLoading, postError] = useFetching(async (limit, page) => {\r\n        const response = await PostService.getAll(limit, page);\r\n        setPosts([...posts, ...response.data])\r\n        const totalCount = response.headers['x-total-count']\r\n        setTotalPages(getPageCount(totalCount, limit));\r\n    })\r\n\r\n    useObserver(lastElement, page < totalPages, isPostsLoading, () => {\r\n        setPage(page + 1);\r\n    })\r\n\r\n    useEffect(() => {\r\n        fetchPosts(limit, page)\r\n    }, [page, limit])\r\n\r\n    const createPost = (newPost) => {\r\n        setPosts([...posts, newPost])\r\n        setModal(false)\r\n    }\r\n\r\n    // Получаем post из дочернего компонента\r\n    const removePost = (post) => {\r\n        setPosts(posts.filter(p => p.id !== post.id))\r\n    }\r\n\r\n    const changePage = (page) => {\r\n        setPage(page)\r\n    }\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <MyButton style={{marginTop: 30}} onClick={() => setModal(true)}>\r\n                Создать пользователя\r\n            </MyButton>\r\n            <MyModal visible={modal} setVisible={setModal}>\r\n                <PostForm create={createPost}/>\r\n            </MyModal>\r\n            <hr style={{margin: '15px 0'}}/>\r\n            <PostFilter\r\n                filter={filter}\r\n                setFilter={setFilter}\r\n            />\r\n            <MySelect\r\n                value={limit}\r\n                onChange={value => setLimit(value)}\r\n                defaultValue=\"Кол-во элементов на странице\"\r\n                options={[\r\n                    {value: 5, name: '5'},\r\n                    {value: 10, name: '10'},\r\n                    {value: 25, name: '25'},\r\n                    {value: -1, name: 'Показать все'},\r\n                ]}\r\n            />\r\n            {postError &&\r\n            <h1>Произошла ошибка ${postError}</h1>\r\n            }\r\n            <PostList remove={removePost} posts={sortedAndSearchedPosts} title=\"Посты про JS\"/>\r\n            <div ref={lastElement} style={{height: 20, background: 'red'}}/>\r\n            {isPostsLoading &&\r\n            <div style={{display: 'flex', justifyContent: 'center', marginTop: 50}}><Loader/></div>\r\n            }\r\n            <Pagination\r\n                page={page}\r\n                changePage={changePage}\r\n                totalPages={totalPages}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Posts;\r\n","import About from \"../pages/About\";\r\nimport Posts from \"../pages/Posts\";\r\nimport PostIdPage from \"../pages/PostIdPage\";\r\nimport Login from \"../pages/Login\";\r\n\r\n\r\nexport const privateRoutes = [\r\n    {path: '/about', component: About, exact: true},\r\n    {path: '/posts', component: Posts, exact: true},\r\n    {path: '/posts/:id', component: PostIdPage, exact: true},\r\n]\r\n\r\nexport const publicRoutes = [\r\n    {path: '/login', component: Login, exact: true},\r\n]\r\n","import {useEffect, useRef} from \"react\";\r\n\r\nexport const useObserver = (ref, canLoad, isLoading, callback) => {\r\n    const observer = useRef();\r\n\r\n    useEffect(() => {\r\n        if(isLoading) return;\r\n        if(observer.current) observer.current.disconnect();\r\n\r\n        var cb = function(entries, observer) {\r\n            if (entries[0].isIntersecting && canLoad) {\r\n                callback()\r\n            }\r\n        };\r\n        observer.current = new IntersectionObserver(cb);\r\n        observer.current.observe(ref.current)\r\n    }, [isLoading])\r\n}\r\n","import React, {useEffect, useState} from 'react';\r\nimport {useParams} from 'react-router-dom';\r\nimport {useFetching} from \"../hooks/useFetching\";\r\nimport PostService from \"../API/PostService\";\r\nimport Loader from \"../components/UI/Loader/Loader\";\r\n\r\nconst PostIdPage = () => {\r\n    const params = useParams()\r\n    const [post, setPost] = useState({});\r\n    const [comments, setComments] = useState([]);\r\n    const [fetchPostById, isLoading, error] = useFetching(async (id) => {\r\n        const response = await PostService.getById(id)\r\n        setPost(response.data);\r\n    })\r\n    const [fetchComments, isComLoading, comError] = useFetching(async (id) => {\r\n        const response = await PostService.getCommentsByPostId(id)\r\n        setComments(response.data);\r\n    })\r\n\r\n    useEffect(() => {\r\n        fetchPostById(params.id)\r\n        fetchComments(params.id)\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <h1>Вы открыли страницу поста c ID = {params.id}</h1>\r\n            {isLoading\r\n                ? <Loader/>\r\n                :  <div>{post.id}. {post.title}</div>\r\n            }\r\n            <h1>\r\n                Комментарии\r\n            </h1>\r\n            {isComLoading\r\n                ? <Loader/>\r\n                : <div>\r\n                    {comments.map(comm =>\r\n                        <div key={comm.id} style={{marginTop: 15}}>\r\n                            <h5>{comm.email}</h5>\r\n                            <div>{comm.body}</div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PostIdPage;\r\n","import React, {useContext} from 'react';\r\nimport MyInput from \"../components/UI/input/MyInput\";\r\nimport MyButton from \"../components/UI/button/MyButton\";\r\nimport {AuthContext} from \"../context\";\r\n\r\nconst Login = () => {\r\n    const {isAuth, setIsAuth} = useContext(AuthContext);\r\n\r\n    const login = event => {\r\n        event.preventDefault();\r\n        setIsAuth(true);\r\n        localStorage.setItem('auth', 'true')\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Страница для логина</h1>\r\n            <form onSubmit={login}>\r\n                <MyInput type=\"text\" placeholder=\"Введите логин\"/>\r\n                <MyInput type=\"password\" placeholder=\"Введите пароль\"/>\r\n                <MyButton>Войти</MyButton>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n","import React, {useContext} from 'react';\r\nimport {Redirect, Route, Switch} from \"react-router-dom\";\r\nimport {privateRoutes, publicRoutes} from \"../router\";\r\nimport {AuthContext} from \"../context\";\r\nimport Loader from \"./UI/Loader/Loader\";\r\n\r\nconst AppRouter = () => {\r\n    const {isAuth, isLoading} = useContext(AuthContext);\r\n    console.log(isAuth)\r\n\r\n    if (isLoading) {\r\n        return <Loader/>\r\n    }\r\n\r\n    return (\r\n        isAuth\r\n            ?\r\n            <Switch>\r\n                {privateRoutes.map(route =>\r\n                    <Route\r\n                        component={route.component}\r\n                        path={route.path}\r\n                        exact={route.exact}\r\n                        key={route.path}\r\n                    />\r\n                )}\r\n                <Redirect to='/posts'/>\r\n            </Switch>\r\n            :\r\n            <Switch>\r\n                {publicRoutes.map(route =>\r\n                    <Route\r\n                        component={route.component}\r\n                        path={route.path}\r\n                        exact={route.exact}\r\n                        key={route.path}\r\n                    />\r\n                )}\r\n                <Redirect to='/login'/>\r\n            </Switch>\r\n    );\r\n};\r\n\r\nexport default AppRouter;\r\n","import React, {useEffect, useState} from 'react';\r\nimport './styles/App.css';\r\nimport {BrowserRouter} from \"react-router-dom\";\r\nimport Navbar from \"./components/UI/Navbar/Navbar\";\r\nimport AppRouter from \"./components/AppRouter\";\r\nimport {AuthContext} from \"./context\";\r\n\r\nfunction App() {\r\n    const [isAuth, setIsAuth] = useState(false);\r\n    const [isLoading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem('auth')) {\r\n            setIsAuth(true)\r\n        }\r\n        setLoading(false);\r\n    }, [])\r\n\r\n    return (\r\n        <AuthContext.Provider value={{\r\n            isAuth,\r\n            setIsAuth,\r\n            isLoading\r\n        }}>\r\n            <BrowserRouter>\r\n                <Navbar/>\r\n                <AppRouter/>\r\n            </BrowserRouter>\r\n        </AuthContext.Provider>\r\n    )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n    <App/>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}